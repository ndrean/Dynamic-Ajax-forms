
<div class="container">
  <div class="row">
    <div class="col-md-8">
      <h1>Comments</h1>
    </div>
      
    <div class="col-md4">
      <h2>
        <%= link_to 'Go to restaurants list', restos_path, class:"badge badge-secondary", style:"font-size: 16px; color:white"%>
      </h2>
    </div>
  </div>
  <p>The comments are editable and can be saved on the fly. We can create a comment with the associated restaurant.
  If we want to add a rstaurant in the list while on this page, there is a form to add it on the fly.</p>
  <div class="row">
    <table class="table table-dark">
      <thead>
        <tr>
          <th>Comment (editable)</th>
          <th>Restaurant</th>
          <th>Save Edit</th>
          <th> Delete Comment</th>
        </tr>
      </thead>

      <tbody id="tb-comments"> 
        <% @comments.each do |comment| %>
          <tr data-comment-id= "<%= comment.id %>" >
            <td contenteditable="true" data-editable="<%= comment.id %>"><%= comment.comment %> </td>
            <td><%= comment.resto.name %></td>
            <td>
              <%= form_with model: comment do |f| %>
                <%= f.hidden_field :comment, id:"comment_content_#{comment.id}" %>
                <%#= f.submit "Save", class:"btn btn-primary" %> 
                <%= f.button :submit do %>
                  <i class="fas fa-spell-check" style="color:green" data-toggle="tooltip" data-placement="top" title="Save Edit"></i>
                  <% end %>
              <% end %> 
            </td>
            <td>
              <%= link_to  comment, method: :delete, remote: true, data: { confirm: 'Are you sure?' } do %>
                <i class="fa fa-times-circle fa-2x mt-1" style="color:red" data-toggle="tooltip" data-placement="top" title="Delete"></i>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <br>

  </div>
  <div class="row">
    <div class="col-md-8">
            <%= link_to 'New Comment / AJAX', 'comments/new', remote: true, class:"btn btn-success", style:" color:white;" %>

      <div id="new_comments"></div>
    </div>
    <div class="col-md-4">
        <%= link_to 'Add new Restaurant on the fly?', 'comments/new_resto_on_the_fly', remote: true, class:"btn btn-success", style:" color:white;" %>
      <div id="new_resto_on_the_fly"></div>
    </div>
  </div>
  <hr>
  <p>
    <%= link_to 'Navigate to Dynamic form', 'nests/new', data: {turbolinks: false}, class:"btn btn-info", style:"font-size:12px; color: white;" %>
    <%= link_to 'Home', root_path, class:"btn btn-info", style:"font-size:12px; color: white;" %>
  </p>
</div>
